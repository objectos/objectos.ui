"use strict";(self.webpackChunk_carbon_react=self.webpackChunk_carbon_react||[]).push([[6153],{"./src/components/LayoutDirection/LayoutDirectionContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>LayoutDirectionContext});const LayoutDirectionContext=__webpack_require__("../../node_modules/react/index.js").createContext({direction:"ltr"})},"./src/components/LayoutDirection/useLayoutDirection.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>useLayoutDirection});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_LayoutDirectionContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/LayoutDirection/LayoutDirectionContext.ts");function useLayoutDirection(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_LayoutDirectionContext__WEBPACK_IMPORTED_MODULE_1__.$)}},"./src/components/Menu/Menu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>Menu});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_10__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react-dom/index.js"),_internal_keyboard__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/internal/keyboard/match.ts"),_internal_keyboard__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/internal/keyboard/keys.ts"),_internal_useMergedRefs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/internal/useMergedRefs.ts"),_internal_usePrefix__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/internal/usePrefix.ts"),_prop_types_deprecate__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/prop-types/deprecate.ts"),_MenuContext__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Menu/MenuContext.ts"),_LayoutDirection__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/LayoutDirection/useLayoutDirection.ts"),_internal_environment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/internal/environment.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const Menu=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function Menu({children,className,containerRef,label,menuAlignment,mode,onClose,onOpen,open,size="sm",legacyAutoalign="true",target=_internal_environment__WEBPACK_IMPORTED_MODULE_3__.S&&document.body,x=0,y=0,...rest},forwardRef){const prefix=(0,_internal_usePrefix__WEBPACK_IMPORTED_MODULE_4__.M)(),focusReturn=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),context=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_MenuContext__WEBPACK_IMPORTED_MODULE_5__.x),isRoot=context.state.isRoot,menuSize=isRoot?size:context.state.size,[childState,childDispatch]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)(_MenuContext__WEBPACK_IMPORTED_MODULE_5__.a,{...context.state,isRoot:!1,size,requestCloseRoot:isRoot?handleClose:context.state.requestCloseRoot}),childContext=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>({state:childState,dispatch:childDispatch})),[childState,childDispatch]),menu=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),ref=(0,_internal_useMergedRefs__WEBPACK_IMPORTED_MODULE_6__.a)([forwardRef,menu]),[position,setPosition]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([-1,-1]),focusableItems=childContext.state.items.filter((item=>!item.disabled&&item.ref.current));let actionButtonWidth;if(containerRef?.current){const{width:w}=containerRef.current.getBoundingClientRect();actionButtonWidth=w}const{direction}=(0,_LayoutDirection__WEBPACK_IMPORTED_MODULE_7__.D)();function handleOpen(){if(menu.current){if(focusReturn.current=document.activeElement,legacyAutoalign){const pos=function calculatePosition(){const ranges={x:getPosition(x),y:getPosition(y)};if(!ranges.x||!ranges.y)return[-1,-1];return[fitValue(ranges.x,"x")??-1,fitValue(ranges.y,"y")??-1]}();"rtl"!==document?.dir&&"rtl"!==direction||rest?.id?.includes("MenuButton")?(menu.current.style.insetInlineStart=`${pos[0]}px`,menu.current.style.insetInlineEnd="initial"):(menu.current.style.insetInlineStart="initial",menu.current.style.insetInlineEnd=`${pos[0]}px`),menu.current.style.insetBlockStart=`${pos[1]}px`,setPosition(pos)}menu.current.focus(),onOpen&&onOpen()}}function handleClose(){!function returnFocus(){focusReturn.current&&focusReturn.current.focus()}(),onClose&&onClose()}function focusItem(e){const currentItem=focusableItems.findIndex((item=>item.ref?.current?.contains(document.activeElement)));let indexToFocus=currentItem;if(-1===currentItem?indexToFocus=0:e&&((0,_internal_keyboard__WEBPACK_IMPORTED_MODULE_8__.Y)(e,_internal_keyboard__WEBPACK_IMPORTED_MODULE_9__.Do)&&(indexToFocus-=1),(0,_internal_keyboard__WEBPACK_IMPORTED_MODULE_8__.Y)(e,_internal_keyboard__WEBPACK_IMPORTED_MODULE_9__.yd)&&(indexToFocus+=1)),indexToFocus<0&&(indexToFocus=focusableItems.length-1),indexToFocus>=focusableItems.length&&(indexToFocus=0),indexToFocus!==currentItem){const nodeToFocus=focusableItems[indexToFocus];nodeToFocus.ref?.current?.focus(),e?.preventDefault()}}function fitValue(range,axis){if(!menu.current)return;const{width,height}=menu.current.getBoundingClientRect(),alignment=isRoot?"vertical":"horizontal",axes={x:{max:window.innerWidth,size:width,anchor:"horizontal"===alignment?range[1]:range[0],reversedAnchor:"horizontal"===alignment?range[0]:range[1],offset:0},y:{max:window.innerHeight,size:height,anchor:"horizontal"===alignment?range[0]:range[1],reversedAnchor:"horizontal"===alignment?range[1]:range[0],offset:isRoot?0:4}};if(actionButtonWidth&&actionButtonWidth<axes.x.size&&("bottom"===menuAlignment||"top"===menuAlignment)&&(axes.x.size=actionButtonWidth),actionButtonWidth&&("bottom-end"===menuAlignment||"top-end"===menuAlignment)&&axes.x.anchor>=87&&actionButtonWidth<axes.x.size){const diff=axes.x.anchor+axes.x.reversedAnchor;axes.x.anchor=axes.x.anchor+diff}const{max,size,anchor,reversedAnchor,offset}=axes[axis],options=[max-8-size-anchor>=0&&anchor-offset,reversedAnchor-size>=0&&reversedAnchor-size+offset,max-8-size],topAlignment="top"===menuAlignment||"top-end"===menuAlignment||"top-start"===menuAlignment;"number"==typeof options[0]&&topAlignment&&options[0]>=0&&!options[1]&&"y"===axis?menu.current.style.transform="translate(0)":topAlignment&&!options[0]&&"y"===axis&&(options[0]=anchor-offset);const bestOption=options.find((option=>!1!==option));return bestOption>=8?bestOption:8}function notEmpty(value){return null!=value}function getPosition(x){if(Array.isArray(x)){const filtered=x.filter(notEmpty);return 2===filtered.length?filtered:void 0}return[x,x]}(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{if(open){const raf=requestAnimationFrame((()=>{focusableItems.length>0&&focusItem()}));return()=>cancelAnimationFrame(raf)}}),[open,focusableItems]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{open?handleOpen():setPosition([-1,-1])}),[open]);const classNames=classnames__WEBPACK_IMPORTED_MODULE_0___default()(className,`${prefix}--menu`,`${prefix}--menu--${menuSize}`,{[`${prefix}--menu--box-shadow-top`]:menuAlignment&&"top"===menuAlignment.slice(0,3),[`${prefix}--menu--open`]:open,[`${prefix}--menu--shown`]:open&&!legacyAutoalign||position[0]>=0&&position[1]>=0,[`${prefix}--menu--with-icons`]:childContext.state.hasIcons,[`${prefix}--menu--with-selectable-items`]:childContext.state.hasSelectableItems,[`${prefix}--autoalign`]:!legacyAutoalign}),rendered=react__WEBPACK_IMPORTED_MODULE_1__.createElement(_MenuContext__WEBPACK_IMPORTED_MODULE_5__.x.Provider,{value:childContext},react__WEBPACK_IMPORTED_MODULE_1__.createElement("ul",_extends({},rest,{className:classNames,role:"menu",ref,"aria-label":label,tabIndex:-1,onKeyDown:function handleKeyDown(e){e.stopPropagation(),((0,_internal_keyboard__WEBPACK_IMPORTED_MODULE_8__.Y)(e,_internal_keyboard__WEBPACK_IMPORTED_MODULE_9__.uf)||!isRoot&&(0,_internal_keyboard__WEBPACK_IMPORTED_MODULE_8__.Y)(e,_internal_keyboard__WEBPACK_IMPORTED_MODULE_9__.nk))&&onClose?handleClose():focusItem(e)},onBlur:function handleBlur(e){open&&onClose&&isRoot&&!menu.current?.contains(e.relatedTarget)&&handleClose()}}),children));return target&&isRoot?open&&(0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(rendered,target)||null:rendered}));Menu.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_10___default().node,className:prop_types__WEBPACK_IMPORTED_MODULE_10___default().string,label:prop_types__WEBPACK_IMPORTED_MODULE_10___default().string,menuAlignment:prop_types__WEBPACK_IMPORTED_MODULE_10___default().string,mode:(0,_prop_types_deprecate__WEBPACK_IMPORTED_MODULE_11__.C)(prop_types__WEBPACK_IMPORTED_MODULE_10___default().oneOf(["full","basic"]),"Menus now always support both icons as well as selectable items and nesting."),onClose:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,onOpen:prop_types__WEBPACK_IMPORTED_MODULE_10___default().func,open:prop_types__WEBPACK_IMPORTED_MODULE_10___default().bool,size:prop_types__WEBPACK_IMPORTED_MODULE_10___default().oneOf(["xs","sm","md","lg"]),target:prop_types__WEBPACK_IMPORTED_MODULE_10___default().object,x:prop_types__WEBPACK_IMPORTED_MODULE_10___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_10___default().number,prop_types__WEBPACK_IMPORTED_MODULE_10___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_10___default().number)]),y:prop_types__WEBPACK_IMPORTED_MODULE_10___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_10___default().number,prop_types__WEBPACK_IMPORTED_MODULE_10___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_10___default().number)])},Menu.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{containerRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}],raw:"RefObject<HTMLDivElement | null>"},description:"The ref of the containing element, used for positioning and alignment of the menu"},children:{required:!1,tsType:{name:"ReactNode"},description:"A collection of MenuItems to be rendered within this Menu.",type:{name:"node"}},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names.",type:{name:"string"}},label:{required:!1,tsType:{name:"string"},description:"A label describing the Menu.",type:{name:"string"}},menuAlignment:{required:!1,tsType:{name:"string"},description:"Specify how the menu should align with the button element",type:{name:"string"}},mode:{required:!1,tsType:{name:"union",raw:"'full' | 'basic'",elements:[{name:"literal",value:"'full'"},{name:"literal",value:"'basic'"}]},description:"@deprecated Menus now always support both icons as well as selectable items and nesting.\nThe mode of this menu. Defaults to full.\n`full` supports nesting and selectable menu items, but no icons.\n`basic` supports icons but no nesting or selectable menu items.\n\n**This prop is not intended for use and will be set by the respective implementation (like useContextMenu, MenuButton, and ComboButton).**",type:{name:"custom",raw:"deprecate(\n  PropTypes.oneOf(['full', 'basic']),\n  'Menus now always support both icons as well as selectable items and nesting.'\n)"}},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Provide an optional function to be called when the Menu should be closed,\nincluding if the Menu is blurred, the user presses escape, or the Menu is\na submenu and the user presses ArrowLeft.",type:{name:"func"}},onOpen:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Provide an optional function to be called when the Menu is opened.",type:{name:"func"}},open:{required:!1,tsType:{name:"boolean"},description:"Whether the Menu is open or not.",type:{name:"bool"}},size:{required:!1,tsType:{name:"union",raw:"'xs' | 'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'xs'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:"Specify the size of the Menu.",defaultValue:{value:"'sm'",computed:!1},type:{name:"enum",value:[{value:"'xs'",computed:!1},{value:"'sm'",computed:!1},{value:"'md'",computed:!1},{value:"'lg'",computed:!1}]}},target:{required:!1,tsType:{name:"Element"},description:"Specify a DOM node where the Menu should be rendered in. Defaults to document.body.",defaultValue:{value:"canUseDOM && document.body",computed:!1},type:{name:"object"}},x:{required:!1,tsType:{name:"union",raw:"number | [number, number]",elements:[{name:"number"},{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]}]},description:"Specify the x position of the Menu. Either pass a single number or an array with two numbers describing your activator's boundaries ([x1, x2])",defaultValue:{value:"0",computed:!1},type:{name:"union",value:[{name:"number"},{name:"arrayOf",value:{name:"number"}}]}},y:{required:!1,tsType:{name:"union",raw:"number | [number, number]",elements:[{name:"number"},{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]}]},description:"Specify the y position of the Menu. Either pass a single number or an array with two numbers describing your activator's boundaries ([y1, y2])",defaultValue:{value:"0",computed:!1},type:{name:"union",value:[{name:"number"},{name:"arrayOf",value:{name:"number"}}]}},legacyAutoalign:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"'true'",computed:!1}}}}},"./src/components/Menu/MenuContext.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>menuReducer,x:()=>MenuContext});function menuReducer(state,action){switch(action.type){case"enableIcons":return{...state,hasIcons:!0};case"enableSelectableItems":return{...state,hasSelectableItems:!0};case"registerItem":{const newItem=action.payload,items=state.items.filter((item=>item.ref.current)),next=newItem.ref.current?.nextElementSibling,idx=items.findIndex((item=>item.ref.current===next));return items.splice(idx<0?items.length:idx,0,newItem),{...state,items}}}}const MenuContext=(0,__webpack_require__("../../node_modules/react/index.js").createContext)({state:{isRoot:!0,hasIcons:!1,hasSelectableItems:!1,size:null,items:[],requestCloseRoot:()=>{}},dispatch:_=>{}})}}]);